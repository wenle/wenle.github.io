<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-CN" lang="zh-CN">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="author" content="Wenle" />
    <title>限流与降级</title>
    <link rel="shortcut icon" href="/favicon.ico" />
    <link href="/feed/" rel="alternate" title="Wenle" type="application/atom+xml" />
    <link rel="stylesheet" href="/media/css/style.css" />
    <link rel="stylesheet" href="/media/css/highlight.css" media="all"/>
    <script type="text/javascript" src="/media/js/jquery-1.7.1.min.js"></script>
  </head>
  <body>
    <div id="container">
      <div id="main" role="main">
        <header>
          <h1>限流与降级</h1>
        </header>
        <nav>
          <span><a title="首页" class="" href="/">首页</a></span>
          <span><a title="分类" class="" href="/categories/">分类</a></span>
          <span><a title="标签" class="" href="/tags/">标签</a></span>
          <span><a title="留言" class="" href="/guestbook/">留言</a></span>
          <span><a title="关于" class="" href="/about/">关于</a></span>
        </nav>
        <article class="content">
          <section class="meta">
  <span class="time">
    <time datetime="2016-01-26">2016-01-26</time>
  </span>
  
  | 
  <span class="categories">
    分类
    
    <a href="/categories/#点滴积累" title="点滴积累">点滴积累</a>&nbsp;
    
  </span>
  
  
  | 
  <span class="tags">
    标签
    
    <a href="/tags/#互联网" title="互联网">互联网</a>&nbsp;
    
  </span>
  
</section>
<section class="post">
  <p>话说我在进入互联网之前，没有感觉到很大的行业差异。进来之后，发现同为Java服务端，服务的场景不一样，解决问题的方法论完全不一样，这也是所谓的互联网经验值钱的地方。后面我会陆续介绍一些这方面的概念。</p>

<h3 id="section">降级与限流</h3>
<p>凡是做管理系统的，一般和这两个名词无缘。对网站来说，衡量性能有两个常见指标，RT和QPS。RT是Response time，即响应时间。QPS是Query per second，即每秒查询次数。</p>

<h4 id="section-1">降级</h4>

<p>当RT高的时候，用户感觉到明显的延时，体验下降，甚至业务流程无法正常进行。在这种时候可以通过关闭次要服务，或者降低服务质量来保证RT，保证核心业务能正常进行。举个例子，Gmail的网站本来是很酷的。但是如果网络条件不好，loading时间久的时候，Gmail会提示用户是否要切换到基本html版本。在基本html版本网页很快就加载完成了，用户可以看邮件，但是没有JavaScript实现的炫酷的体验。再比如电商网站的商品页面，在降级时，推荐、广告、浏览历史之类的模块可以关闭，图片质量可以降低。</p>

<h4 id="section-2">限流</h4>

<p>限流是指某个系统对关联系统的访问QPS过高，为了防止拖垮关联的核心系统，对从自身发出的访问进行限制。<br />
比如网站最前端的nginx接入层可以做限流配置，防止冲垮后面的服务器。再比如，某网站做了一个火爆的促销，在这个促销页面上访问了一个能力比较弱的应用服务器，那么在促销上线之前，就应该有相应的限流方案，比如说在1秒钟内访问人数达到多少后，其他的人直接转到错误页面。</p>


</section>
<section align="right">
  <br/>
  <span>
    <a   class="pageNavInvalid"  >上一篇</a>
    &nbsp;&nbsp;&nbsp;
    <a   class="pageNavInvalid"  >下一篇</a>
  </span>
</section>

	
	<div class="ds-thread" />
		
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"wenleplus"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = 'http://static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		|| document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>


        </article>
      </div>

      <footer>
        <p><small>
            <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/cn/" target="_blank" title="许可协议">©</a> 2004 - 2016 <a href="/about/">Wenle</a>
        </small></p>
      </footer>

    </div>
  </body>
</html>
